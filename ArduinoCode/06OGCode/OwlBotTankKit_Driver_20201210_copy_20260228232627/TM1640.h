/*
 * @Description: In User Settings Edit
 * @Author:  Changhua
 * @Date: 2019-07-11 11:43:35
 * @LastEditTime: 2020-09-14 10:01:11
 * @LastEditors: Changhua
 */
#ifndef __TM1640_H__
#define __TM1640_H__

#include <Arduino.h>
#include <USBAPI.h>

#define ADDR_START1640 0XC0
#define DSP1640_DIS 0
#define DSP1640_ENB 1

/* 
控制显示 
0x88,0x89,0x8a,0x8b,0x8c,0x8d,0x8e,0x8f 分别对应 
1/16,  2/16,  4/16,  10/16, 11/16, 12/16, 13/16, 14/16    
 
设置数据，0x40,0x44分别对应地址自动加一和固定地址模式      
*/

#define SET_DATA_ORDER 0X40  //数据命令设置 地址自动加1
#define SET_DISPLAY 0X8F     //显示命令控制 脉冲宽度14/16
#define SET_DSP1640_DIS 0x80 //显示关控制

#define VT_DLY1640 150 //80//10//2000
#define VT_DLYNOP 10   //80//10
#define TM1640SLK_PIN 13
#define TM1640DAT_PIN 12

#define TM1640SLK_LOW digitalWrite(TM1640SLK_PIN, LOW)
#define TM1640SLK_HING digitalWrite(TM1640SLK_PIN, HIGH)
#define TM1640DAT_LOW digitalWrite(TM1640DAT_PIN, LOW)
#define TM1640DAT_HING digitalWrite(TM1640DAT_PIN, HIGH)

class TM1640
{
public:
    void TM1640_DisplayClear_led16x8(uint8_t InValue);
    void TM1640_InitConfig_led16x8(uint8_t InValue);
    void TM1640_FullScreenDisaple_led16x8(uint8_t *cx /*in*/);
    void TM1640_DesignatedCoordinatePointDisplay_led16x8(uint8_t coordinatePoint_X, uint8_t coordinatePoint_Y);

public:
    const uint8_t Display_Number[10][16] = {
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x41, 0x41, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"0",0*/
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x7F, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"1",1*/
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x62, 0x51, 0x49, 0x46, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"2",2*/
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x41, 0x49, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"3",3*/
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x14, 0x12, 0x7F, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"4",4*/
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x27, 0x45, 0x45, 0x39, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"5",5*/
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x49, 0x49, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"6",6*/
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x61, 0x11, 0x09, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"7",7*/
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x36, 0x49, 0x49, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"8",8*/
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x49, 0x49, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}  /*"9",9*/

        // {0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x44, 0x42, 0x42, 0x44, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"0",0*/
        // {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x44, 0x7E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"1",1*/
        // {0x00, 0x00, 0x00, 0x00, 0x00, 0x44, 0x62, 0x62, 0x52, 0x4A, 0x4C, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"2",2*/
        // {0x00, 0x00, 0x00, 0x00, 0x00, 0x64, 0x42, 0x42, 0x52, 0x5C, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"3",3*/
        // {0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x28, 0x24, 0x64, 0x7E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"4",4*/
        // {0x00, 0x00, 0x00, 0x00, 0x00, 0x6C, 0x4C, 0x4C, 0x4C, 0x4C, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"5",5*/
        // {0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x54, 0x4A, 0x4A, 0x4C, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"6",6*/
        // {0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x64, 0x1C, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"7",7*/
        // {0x00, 0x00, 0x00, 0x00, 0x00, 0x7C, 0x4A, 0x4A, 0x52, 0x52, 0x2C, 0x00, 0x00, 0x00, 0x00, 0x00}, /*"8",8*/
        // {0x00, 0x00, 0x00, 0x00, 0x00, 0x5C, 0x52, 0x52, 0x52, 0x52, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00}  /*"9",9*/
    };
    const uint8_t Display_Model[11][16] = {
        {0X00, 0X00, 0X3C, 0X7E, 0X7E, 0X3C, 0X00, 0X00, 0X00, 0X00, 0X3C, 0X7E, 0X7E, 0X3C, 0X00, 0X00},
        {0X00, 0X00, 0X08, 0X0C, 0X0C, 0X0C, 0X0C, 0X08, 0X00, 0X00, 0X08, 0X0C, 0X0C, 0X0C, 0X0C, 0X08},
        {0X00, 0X40, 0XE0, 0XE0, 0XF0, 0X70, 0X10, 0X00, 0X00, 0X10, 0X70, 0XF0, 0XE0, 0XE0, 0X40, 0X00},
        {0X30, 0X70, 0X70, 0X60, 0X60, 0X40, 0X40, 0X00, 0X00, 0X40, 0X40, 0X60, 0X60, 0X70, 0X70, 0X30},
        {0X00, 0X30, 0X18, 0X18, 0X38, 0X30, 0X00, 0X00, 0X00, 0X00, 0X30, 0X38, 0X18, 0X18, 0X30, 0X00},
        {0X00, 0X00, 0X18, 0X38, 0X38, 0X18, 0X00, 0X00, 0X00, 0X00, 0X18, 0X38, 0X38, 0X18, 0X00, 0X00},
        {0X00, 0X00, 0X3C, 0X78, 0X70, 0X20, 0X00, 0X00, 0X00, 0X00, 0X20, 0X70, 0X78, 0X3C, 0X00, 0X00},
        {0X00, 0X00, 0X6C, 0X7C, 0X38, 0X7C, 0X6C, 0X00, 0X00, 0X6C, 0X7C, 0X38, 0X7C, 0X6C, 0X00, 0X00},
        {0X08, 0X3C, 0X7C, 0X7C, 0X7C, 0X7C, 0X3C, 0X08, 0X08, 0X3C, 0X7C, 0X7C, 0X7C, 0X7C, 0X3C, 0X08},
        {0X00, 0X3C, 0X42, 0X42, 0X42, 0X3C, 0X00, 0X00, 0X00, 0X00, 0X3C, 0X42, 0X42, 0X42, 0X3C, 0X00},
        {0Xff, 0Xff, 0Xff, 0Xff, 0Xff, 0Xff, 0Xff, 0Xff, 0Xff, 0Xff, 0Xff, 0Xff, 0Xff, 0Xff, 0Xff, 0Xff}};
};

#endif
