<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grid Traversal</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;700;800&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --bg: #0a0a0f;
      --panel: #111118;
      --border: #2a2a3a;
      --accent: #00e5ff;
      --accent2: #ff4d6d;
      --trail: #00e5ff22;
      --text: #e0e0f0;
      --muted: #555570;
      --cell-size: 80px;
      --gap: 6px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Space Mono', monospace;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
      background-image: radial-gradient(ellipse at 20% 20%, #00e5ff08 0%, transparent 60%),
        radial-gradient(ellipse at 80% 80%, #ff4d6d08 0%, transparent 60%);
    }

    header {
      text-align: center;
      margin-bottom: 40px;
    }

    header h1 {
      font-family: 'Syne', sans-serif;
      font-size: 2.4rem;
      font-weight: 800;
      letter-spacing: -0.02em;
      color: var(--text);
    }

    header h1 span {
      color: var(--accent);
    }

    header p {
      color: var(--muted);
      font-size: 0.8rem;
      margin-top: 6px;
      letter-spacing: 0.08em;
    }

    .layout {
      display: flex;
      gap: 40px;
      align-items: flex-start;
      flex-wrap: wrap;
      justify-content: center;
    }

    .grid-wrap {
      position: relative;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(5, var(--cell-size));
      grid-template-rows: repeat(5, var(--cell-size));
      gap: var(--gap);
    }

    .cell {
      width: var(--cell-size);
      height: var(--cell-size);
      border: 1px solid var(--border);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      transition: background 0.3s, border-color 0.3s, box-shadow 0.3s;
      background: var(--panel);
      overflow: hidden;
    }

    .cell .coord-label {
      position: absolute;
      bottom: 5px;
      right: 7px;
      font-size: 0.55rem;
      opacity: 0.35;
      letter-spacing: 0.05em;
      color: var(--muted);
    }

    .cell.trail {
      background: var(--trail);
      border-color: #00e5ff44;
    }

    .cell.trail::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at center, #00e5ff18, transparent 70%);
    }

    .cell.active {
      background: #00e5ff18;
      border-color: var(--accent);
      box-shadow: 0 0 20px #00e5ff44, inset 0 0 20px #00e5ff11;
    }

    .cell.start-cell {
      background: #ff4d6d14;
      border-color: #ff4d6d88;
      box-shadow: 0 0 14px #ff4d6d22;
    }

    .agent {
      position: absolute;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 24px var(--accent), 0 0 8px var(--accent);
      pointer-events: none;
      z-index: 10;
      transition: left 0.35s cubic-bezier(0.34, 1.56, 0.64, 1),
        top 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
      transform: translate(-50%, -50%);
    }

    .agent::after {
      content: '';
      position: absolute;
      inset: 6px;
      border-radius: 50%;
      background: #fff;
      opacity: 0.55;
    }

    .step-badge {
      position: absolute;
      top: 6px;
      left: 8px;
      font-size: 0.6rem;
      font-family: 'Space Mono', monospace;
      color: var(--accent);
      opacity: 0.8;
      font-weight: 700;
      z-index: 2;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 28px;
      width: 300px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .panel h2 {
      font-family: 'Syne', sans-serif;
      font-size: 1rem;
      font-weight: 700;
      color: var(--text);
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .input-group label {
      font-size: 0.7rem;
      color: var(--muted);
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    textarea {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-family: 'Space Mono', monospace;
      font-size: 0.78rem;
      padding: 12px;
      resize: vertical;
      min-height: 130px;
      outline: none;
      transition: border-color 0.2s;
      line-height: 1.7;
    }

    textarea:focus {
      border-color: var(--accent);
    }

    .hint {
      font-size: 0.65rem;
      color: var(--muted);
      line-height: 1.5;
    }

    .btn {
      border: none;
      border-radius: 8px;
      font-family: 'Space Mono', monospace;
      font-size: 0.78rem;
      font-weight: 700;
      cursor: pointer;
      padding: 12px 20px;
      transition: all 0.15s;
      letter-spacing: 0.04em;
    }

    .btn-primary {
      background: var(--accent);
      color: #000;
    }

    .btn-primary:hover:not(:disabled) {
      background: #33eeff;
      transform: translateY(-1px);
    }

    .btn-primary:active:not(:disabled) {
      transform: translateY(0);
    }

    .btn-secondary {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--muted);
    }

    .btn-secondary:hover:not(:disabled) {
      border-color: var(--accent);
      color: var(--accent);
    }

    .btn-danger {
      background: transparent;
      border: 1px solid #ff4d6d44;
      color: var(--accent2);
      font-size: 0.7rem;
    }

    .btn-danger:hover {
      background: #ff4d6d18;
    }

    .btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .controls {
      display: flex;
      gap: 10px;
    }

    .controls .btn {
      flex: 1;
    }

    .status-bar {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px 14px;
      display: flex;
      flex-direction: column;
      gap: 7px;
    }

    .status-row {
      display: flex;
      justify-content: space-between;
      font-size: 0.7rem;
    }

    .status-row .label {
      color: var(--muted);
    }

    .status-row .value {
      color: var(--accent);
      font-weight: 700;
    }

    .status-row .value.complete {
      color: #44ff99;
    }

    .path-log {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      max-height: 90px;
      overflow-y: auto;
    }

    .path-log::-webkit-scrollbar {
      width: 3px;
    }

    .path-log::-webkit-scrollbar-track {
      background: transparent;
    }

    .path-log::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 2px;
    }

    .path-tag {
      font-size: 0.65rem;
      padding: 3px 8px;
      border-radius: 20px;
      border: 1px solid var(--border);
      color: var(--muted);
      transition: all 0.2s;
    }

    .path-tag.done {
      border-color: #00e5ff44;
      color: var(--accent);
      background: #00e5ff11;
    }

    .path-tag.current {
      border-color: var(--accent);
      color: #000;
      background: var(--accent);
      font-weight: 700;
    }

    .error {
      font-size: 0.7rem;
      color: var(--accent2);
      padding: 8px 12px;
      background: #ff4d6d11;
      border: 1px solid #ff4d6d44;
      border-radius: 6px;
      display: none;
    }

    .kbd-hint {
      font-size: 0.62rem;
      color: var(--muted);
      text-align: center;
      opacity: 0.6;
    }
  </style>
</head>

<body>

  <header>
    <h1>Grid <span>Traversal</span></h1>
    <p>VISUALIZE PATH THROUGH 5×5 COORDINATE SPACE</p>
  </header>

  <div class="layout">
    <div class="grid-wrap">
      <div class="grid" id="grid"></div>
      <div class="agent" id="agent" style="display:none"></div>
    </div>

    <div class="panel">
      <h2>Path Input</h2>

      <div class="input-group">
        <label>Coordinates (row, col) — 0 to 4</label>
        <textarea id="coords-input">(0,0)
(0,1)
(1,1)
(1,2)
(2,2)
(2,3)
(3,3)
(4,3)
(4,4)</textarea>
        <span class="hint">One coordinate per line.<br>Format: (row, col) — rows &amp; cols are 0–4.</span>
      </div>

      <div id="error-msg" class="error"></div>

      <button class="btn btn-primary" id="load-btn">Load Path</button>

      <div class="status-bar" id="status-bar" style="display:none">
        <div class="status-row">
          <span class="label">STEP</span>
          <span class="value" id="step-display">0 / 0</span>
        </div>
        <div class="status-row">
          <span class="label">POSITION</span>
          <span class="value" id="pos-display">—</span>
        </div>
        <div class="status-row">
          <span class="label">STATUS</span>
          <span class="value" id="state-display">READY</span>
        </div>
      </div>

      <div class="controls" id="controls" style="display:none">
        <button class="btn btn-secondary" id="prev-btn" disabled>← PREV</button>
        <button class="btn btn-primary" id="next-btn">NEXT MOVE →</button>
      </div>

      <span class="kbd-hint" id="kbd-hint" style="display:none">← → arrow keys also work</span>

      <div class="input-group" id="log-section" style="display:none">
        <label>Path Log</label>
        <div class="path-log" id="path-log"></div>
      </div>

      <button class="btn btn-danger" id="reset-btn" style="display:none">↺ RESET</button>
    </div>
  </div>

  <script>
    const gridEl = document.getElementById('grid');
    const agentEl = document.getElementById('agent');
    const loadBtn = document.getElementById('load-btn');
    const nextBtn = document.getElementById('next-btn');
    const prevBtn = document.getElementById('prev-btn');
    const resetBtn = document.getElementById('reset-btn');
    const stepDisplay = document.getElementById('step-display');
    const posDisplay = document.getElementById('pos-display');
    const stateDisplay = document.getElementById('state-display');
    const errorMsg = document.getElementById('error-msg');
    const pathLog = document.getElementById('path-log');

    let path = [];
    let currentStep = -1;
    let cells = [];

    function buildGrid() {
      gridEl.innerHTML = '';
      cells = [];
      for (let r = 0; r < 5; r++) {
        cells[r] = [];
        for (let c = 0; c < 5; c++) {
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.innerHTML = `<span class="coord-label">${r},${c}</span>`;
          gridEl.appendChild(cell);
          cells[r][c] = cell;
        }
      }
    }

    function parseCoords(text) {
      const coords = [];
      const lines = text.split('\n').map(l => l.trim()).filter(Boolean);
      for (const line of lines) {
        const match = line.match(/\(?\s*(\d)\s*,\s*(\d)\s*\)?/);
        if (!match) return null;
        const r = parseInt(match[1]), c = parseInt(match[2]);
        if (r > 4 || c > 4) return null;
        coords.push([r, c]);
      }
      return coords.length >= 1 ? coords : null;
    }

    function getCellCenter(row, col) {
      const cellSize = 80, gap = 6;
      return {
        x: col * (cellSize + gap) + cellSize / 2,
        y: row * (cellSize + gap) + cellSize / 2
      };
    }

    function updateAgent(row, col) {
      const { x, y } = getCellCenter(row, col);
      agentEl.style.left = x + 'px';
      agentEl.style.top = y + 'px';
      agentEl.style.display = 'block';
    }

    function renderStep(step) {
      // Clear all cells
      for (let r = 0; r < 5; r++) {
        for (let c = 0; c < 5; c++) {
          cells[r][c].className = 'cell';
          const badge = cells[r][c].querySelector('.step-badge');
          if (badge) badge.remove();
        }
      }

      if (step < 0) { agentEl.style.display = 'none'; return; }

      // Mark start cell
      if (step > 0) {
        const [sr, sc] = path[0];
        cells[sr][sc].classList.add('start-cell');
        addBadge(cells[sr][sc], '0');
      }

      // Mark trail
      for (let i = 1; i < step; i++) {
        const [r, c] = path[i];
        cells[r][c].classList.add('trail');
        addBadge(cells[r][c], i);
      }

      // Mark current
      const [cr, cc] = path[step];
      cells[cr][cc].classList.add('active');
      updateAgent(cr, cc);

      // Status updates
      stepDisplay.textContent = `${step + 1} / ${path.length}`;
      posDisplay.textContent = `(${cr}, ${cc})`;
      const complete = step === path.length - 1;
      stateDisplay.textContent = complete ? 'COMPLETE ✓' : 'TRAVERSING';
      stateDisplay.className = 'value' + (complete ? ' complete' : '');

      // Path log update
      document.querySelectorAll('.path-tag').forEach((tag, i) => {
        tag.className = 'path-tag' + (i < step ? ' done' : i === step ? ' current' : '');
      });

      // Scroll current tag into view
      const currentTag = pathLog.querySelector('.current');
      if (currentTag) currentTag.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    function addBadge(cell, num) {
      const b = document.createElement('span');
      b.className = 'step-badge';
      b.textContent = num;
      cell.appendChild(b);
    }

    function showError(msg) {
      errorMsg.textContent = msg;
      errorMsg.style.display = 'block';
      setTimeout(() => errorMsg.style.display = 'none', 3500);
    }

    loadBtn.addEventListener('click', () => {
      const text = document.getElementById('coords-input').value;
      const coords = parseCoords(text);
      if (!coords) {
        showError('Invalid input. Use (row,col) format with values 0–4, one per line.');
        return;
      }

      path = coords;
      currentStep = 0;
      buildGrid();
      renderStep(0);

      pathLog.innerHTML = '';
      path.forEach(([r, c], i) => {
        const tag = document.createElement('span');
        tag.className = 'path-tag' + (i === 0 ? ' current' : '');
        tag.textContent = `(${r},${c})`;
        pathLog.appendChild(tag);
      });

      document.getElementById('status-bar').style.display = 'flex';
      document.getElementById('controls').style.display = 'flex';
      document.getElementById('log-section').style.display = 'flex';
      document.getElementById('kbd-hint').style.display = 'block';
      resetBtn.style.display = 'block';

      prevBtn.disabled = true;
      nextBtn.disabled = path.length <= 1;
    });

    nextBtn.addEventListener('click', () => {
      if (currentStep < path.length - 1) {
        currentStep++;
        renderStep(currentStep);
        prevBtn.disabled = false;
        if (currentStep === path.length - 1) nextBtn.disabled = true;
      }
    });

    prevBtn.addEventListener('click', () => {
      if (currentStep > 0) {
        currentStep--;
        renderStep(currentStep);
        nextBtn.disabled = false;
        if (currentStep === 0) prevBtn.disabled = true;
      }
    });

    resetBtn.addEventListener('click', () => {
      path = []; currentStep = -1;
      buildGrid();
      agentEl.style.display = 'none';
      ['status-bar', 'controls', 'log-section', 'kbd-hint'].forEach(id =>
        document.getElementById(id).style.display = 'none'
      );
      resetBtn.style.display = 'none';
    });

    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowRight' && !nextBtn.disabled) nextBtn.click();
      if (e.key === 'ArrowLeft' && !prevBtn.disabled) prevBtn.click();
    });

    buildGrid();
  </script>
</body>

</html>